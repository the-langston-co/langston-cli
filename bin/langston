#!/bin/bash
set -e
CURRENT_DIR=$(dirname $0)
BASEDIR=$(dirname $0)

cd "$CURRENT_DIR"
cat "$CURRENT_DIR"/../resources/banner.txt
echo -e "langston-cli version $(cat "$CURRENT_DIR"/../resources/VERSION.txt)"
echo

COMMAND=$1
PROGRAM=$2

if [[ $COMMAND == 'auth-proxy' ]]; then
  if [[ $PROGRAM == 'install' ]]; then
    echo "Running install Google Auth Proxy"
    "$CURRENT_DIR"/scripts/auth-proxy/install.sh
  else
    echo "Program $PROGRAM not recognized. Did you mean \"auth-proxy install\"?."
  fi
elif [[ $COMMAND == 'setup' || $COMMAND == 'install' ]]; then
  "$CURRENT_DIR"/scripts/configure/install.sh
  echo
  echo "*******************************************"
  echo "ðŸŽ‰ Langston CLI Installed successfully! ðŸŽ‰"
  echo "*******************************************"
  echo
  cat "$CURRENT_DIR/../resources/COMMANDS.txt"
elif [[ $COMMAND == 'update' ]]; then
  "$CURRENT_DIR"/scripts/configure/update-check.sh
elif [[ $COMMAND == '' || $COMMAND == 'help' ]]; then
  cat "$CURRENT_DIR/../resources/COMMANDS.txt"
else
  echo "Command \"$COMMAND\" not recognized"
fi

echo